{% extends "base.html" %}

{% block title %}Phase Change Super-Solver - ToriCalc{% endblock %}

{% block head_extra %}
  {{ super() }}
  <style>
    .solver-card { border: 1px solid #e0e0e0; border-radius: .5rem; margin-bottom: 1.5rem; background-color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .solver-card-header { background-color: #f7f7f7; font-weight: 600; padding: 0.75rem 1.25rem; border-bottom: 1px solid #e0e0e0; }
    .solver-card-body { padding: 1.25rem; }
    .glass-box { background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 1rem; border-radius: .25rem; margin-top: 1rem; }
    .hvap-inputs .form-label { font-size: 0.9em; margin-bottom: 0.2rem; }
    .citation-section { font-size: 0.9em; background-color: #fdfdfd; border: 1px solid #eee; padding: 1rem; border-radius: .5rem; }
    .citation-item { margin-bottom: 0.75rem; padding-bottom: 0.75rem; border-bottom: 1px solid #f0f0f0; }
    .citation-item:last-child { margin-bottom: 0; padding-bottom: 0; border-bottom: none; }
    .bibtex { white-space: pre-wrap; background-color: #e9ecef; padding: 10px; border-radius: 5px; font-family: monospace; }
  </style>
{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row"><div class="col-xl-10 mx-auto">
        <div class="text-center mb-4">
            <h1>Phase Change Super-Solver</h1>
            <p class="lead">Find and calculate T<sub>b</sub>, T<sub>m</sub>, H<sub>fus</sub>, and H<sub>vap</sub> using data-driven methods and first-principle correlations.</p>
        </div>
        <div class="card shadow-sm mb-4">
            <div class="card-body">
                 <label for="chemical-name-input" class="form-label"><b>1. Find Your Chemical</b></label>
                <div class="input-group">
                    <input type="text" class="form-control" id="chemical-name-input" placeholder="e.g., water, benzene, ethanol...">
                    <button class="btn btn-primary" type="button" id="find-chemical-btn">Find</button>
                </div>
                <div id="finder-status" class="form-text mt-2"></div>
            </div>
        </div>
        <div id="solver-sections-container"></div>
        <div id="citations-master-section" class="mt-4" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h3 class="mb-0">Citations</h3>
                <div class="btn-group btn-group-sm" role="group">
                    <button type="button" class="btn btn-outline-secondary format-btn active" data-format="default">Default</button>
                    <button type="button" class="btn btn-outline-secondary format-btn" data-format="apa">APA</button>
                    <button type="button" class="btn btn-outline-secondary format-btn" data-format="acs">ACS</button>
                    <button type="button" class="btn btn-outline-secondary format-btn" data-format="bibtex">BibTeX</button>
                </div>
            </div>
            <div id="citations-list" class="citation-section"></div>
        </div>
    </div></div>
</div>
{% endblock %}

{% block scripts_extra %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/phase_change_smart_calculator.js') }}"></script>
{% endblock %}